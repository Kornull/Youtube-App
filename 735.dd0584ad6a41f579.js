"use strict";(self.webpackChunkfinal=self.webpackChunkfinal||[]).push([[735],{6735:(E,x,r)=>{r.r(x),r.d(x,{RegistrationModule:()=>L});var u=r(6814),f=r(5959),F=r(7398),c=r(2296),h=r(617),g=r(6146),t=r(9212),p=r(8165),T=r(1274),C=r(2032),l=r(6223),_=r(9);function b(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter your name!"),t.qZA())}function Z(o,s){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();let n;t.xp6(1),t.AsE("Min name len - ",(null==(n=e.updateForm.get("name"))||null==n.errors||null==n.errors.minlength?null:n.errors.minlength.requiredLength)||"2",", name now - ",(null==(n=e.updateForm.get("name"))||null==n.errors||null==n.errors.minlength?null:n.errors.minlength.actualLength)||"0","")}}function w(o,s){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();let n;t.xp6(1),t.AsE("Max name len - ",null==(n=e.updateForm.get("name"))||null==n.errors||null==n.errors.maxlength?null:n.errors.maxlength.requiredLength,", name len now - ",null==(n=e.updateForm.get("name"))||null==n.errors||null==n.errors.maxlength?null:n.errors.maxlength.actualLength,"")}}function N(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Name cannot contain numbers or special signs."),t.qZA())}function U(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Same name."),t.qZA())}let y=(()=>{class o{constructor(e){this.fb=e,this.newName=new t.vpe,this.validForm=new t.vpe,this.disabledInput=!1,this.nameNow=this.oldName,this.updateForm=this.fb.group({name:["",[l.kI.minLength(2),l.kI.maxLength(40),l.kI.required,(0,_.qg)(),(0,_.j7)(this.oldName)]]})}ngOnInit(){this.updateForm.controls.name.setValue(this.oldName)}ngOnChanges(){!0===this.disabledInput?this.updateForm.controls.name.disable():this.updateForm.controls.name.enable()}onChange(){this.updateForm.controls.name.value===this.oldName&&this.updateForm.controls.name.setErrors({sameName:!0}),this.newName.emit(this.updateForm.controls.name.value),this.validForm.emit(this.updateForm.valid)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile-form"]],inputs:{oldName:"oldName",isSaveChanges:"isSaveChanges",disabledInput:"disabledInput"},outputs:{newName:"newName",validForm:"validForm"},standalone:!0,features:[t.TTD,t.jDz],decls:11,vars:6,consts:[[1,"form-container"],[1,"form",3,"formGroup"],["color","accent",1,"form-input"],["matInput","","formControlName","name",3,"ngModelChange"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"input",3),t.NdJ("ngModelChange",function(){return i.onChange()}),t.qZA(),t.YNc(6,b,2,0,"mat-error")(7,Z,2,2,"mat-error")(8,w,2,2,"mat-error")(9,N,2,0,"mat-error")(10,U,2,0,"mat-error"),t.qZA()()()),2&n){let a,m,v,P;t.xp6(1),t.Q6J("formGroup",i.updateForm),t.xp6(5),t.um2(6,i.updateForm.get("name").hasError("required")?6:-1),t.xp6(1),t.um2(7,null!=(a=i.updateForm.get("name"))&&a.hasError("minlength")&&null!=(a=i.updateForm.get("name"))&&a.touched?7:-1),t.xp6(1),t.um2(8,null!=(m=i.updateForm.get("name"))&&m.hasError("maxlength")&&null!=(m=i.updateForm.get("name"))&&m.touched?8:-1),t.xp6(1),t.um2(9,null!=(v=i.updateForm.get("name"))&&v.hasError("invalidName")?9:-1),t.xp6(1),t.um2(10,null!=(P=i.updateForm.get("name"))&&P.hasError("sameName")?10:-1)}},dependencies:[p.lN,p.KE,p.hX,p.TO,T.g0,C.c,C.Nt,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],styles:[".form[_ngcontent-%COMP%]{background:rgba(0,0,0,0)}.form-container[_ngcontent-%COMP%]{padding:0}.form-input[_ngcontent-%COMP%]{width:100%}  .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#00800000!important;height:50px!important}"]})}return o})();var d=r(2913);let M=(()=>{class o{constructor(e,n,i){this.requestService=e,this.toast=n,this.router=i}logout(){this.requestService.profileLogout().subscribe({next:()=>{this.toast.openSnack("Logout success",!1),this.deleteCookie(),localStorage.clear(),sessionStorage.clear(),this.router.navigate(["/signin"])},error:e=>{const{error:n}=e;this.toast.openSnack(null===n?e.statusText:n.message,!0)}})}deleteCookie(){const e=document.cookie.split(";");for(let n=0;n<e.length;n+=1){const i=e[n],a=i.indexOf("="),m=a>-1?i.substr(0,a):i;document.cookie=`${m}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(d.r8),t.Y36(d.cw),t.Y36(f.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile-logout-btn"]],standalone:!0,features:[t.jDz],decls:4,vars:0,consts:[["mat-button","",1,"logout",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.logout()}),t._uU(1,"Logout "),t.TgZ(2,"mat-icon"),t._uU(3,"input"),t.qZA()())},dependencies:[c.ot,c.lW,h.Ps,h.Hw],styles:[".logout[_ngcontent-%COMP%]{position:absolute;top:0;right:0}"]})}return o})();var A=r(4221);function k(o,s){if(1&o&&(t.TgZ(0,"h3",9),t._uU(1," Name: "),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.Oqu(e.name)}}function O(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-profile-form",12),t.NdJ("newName",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.newName=i)})("validForm",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.validForm=i)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("oldName",e.name)("disabledInput",e.reset)}}function q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onChangeUserInfo())}),t._uU(1," Change "),t.qZA()}}function I(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onCloseInput())}),t._uU(1," Cancel"),t.qZA(),t.TgZ(2,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSaveChanges())}),t._uU(3," Save "),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.reset),t.xp6(2),t.Q6J("disabled",!e.validForm)}}const S=[{path:"",component:(()=>{class o{constructor(e,n,i){this.store=e,this.requestService=n,this.toast=i,this.newName="",this.validForm=!1,this.isUpdateProfile=!1,this.saveChanges=!1,this.reset=!1,this.name="",this.email="",this.createAt="",this.uid=""}ngOnInit(){this.userProfileInfo$=this.store.select(g.K9).pipe((0,F.U)(e=>null===e?(this.store.dispatch(g.gn.getUserInfo()),null):e)),this.userProfileInfo$.subscribe(e=>{null!==e&&(this.name=e.name,this.email=e.email,this.uid=e.uid,this.createAt=e.createdAt)})}onChangeUserInfo(){this.isUpdateProfile=!0}onCloseInput(){this.isUpdateProfile=!1,this.validForm=!1}onSaveChanges(){this.validForm&&this.requestService.setUserName(this.newName).subscribe({next:()=>{this.toast.openSnack("Name updated successfully",!1),this.store.dispatch(g.gn.changeProfileName({name:this.newName})),this.name=this.newName,this.isUpdateProfile=!1,this.reset=!1},error:e=>{const{error:n}=e;this.toast.openSnack(null===n?e.statusText:n.message,!0),this.validForm=!0,this.reset=!1}}),this.validForm=!1,this.reset=!0}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(A.yh),t.Y36(d.r8),t.Y36(d.cw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile"]],standalone:!0,features:[t._Bn([u.Zd]),t.jDz],decls:28,vars:8,consts:[[1,"profile-container"],[1,"profile"],[1,"profile-title"],[1,"profile-card"],[1,"avatar"],[1,"profile-card--avatar"],["src","./assets/ava.png","priority","","alt","",1,"profile-card--img"],[1,"profile-card--description"],["class","description"],[1,"description"],[1,"profile-btn--block"],["class","profile-btn","mat-stroked-button","","color","primary"],[3,"oldName","disabledInput","newName","validForm"],["mat-stroked-button","","color","primary",1,"profile-btn",3,"click"],["mat-stroked-button","","color","accent",1,"profile-btn",3,"disabled","click"],["mat-raised-button","","color","warn",1,"profile-btn",3,"disabled","click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-profile-logout-btn"),t.TgZ(3,"h2",2),t._uU(4,"Profile:"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5),t._UZ(8,"img",6),t.qZA()(),t.TgZ(9,"div",7),t.YNc(10,k,4,1,"h3",8)(11,O,1,2),t.TgZ(12,"h3",9),t._uU(13," Email: "),t.TgZ(14,"span"),t._uU(15),t.qZA()(),t.TgZ(16,"h3",9),t._uU(17," Id: "),t.TgZ(18,"span"),t._uU(19),t.qZA()(),t.TgZ(20,"h3",9),t._uU(21," Register date: "),t.TgZ(22,"span"),t._uU(23),t.ALo(24,"date"),t.qZA()()()(),t.TgZ(25,"div",10),t.YNc(26,q,2,0,"button",11)(27,I,4,2),t.qZA()()()),2&n&&(t.xp6(10),t.um2(10,i.isUpdateProfile?11:10),t.xp6(5),t.Oqu(i.email),t.xp6(4),t.Oqu(i.uid),t.xp6(4),t.Oqu(t.xi3(24,5,i.createAt,"medium")),t.xp6(3),t.um2(26,i.isUpdateProfile?27:26))},dependencies:[u.ez,u.uU,c.ot,c.lW,h.Ps,y,M],styles:[".profile[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;height:400px;width:90%;gap:14px;padding:12px}.profile-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:flex-end;width:100%;max-width:980px;padding:10px;margin:0 auto;background:var(--profile)}.profile-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;width:100%;max-width:536px;padding:10px;font-size:29px;margin:0}.profile-btn[_ngcontent-%COMP%]{transition:box-shadow .2s linear}.profile-btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.profile-btn--block[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;width:100%}.profile-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;gap:14px;max-width:760px}.profile-card--img[_ngcontent-%COMP%]{width:100%;max-width:180px}.profile-card--avatar[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.profile-card--description[_ngcontent-%COMP%]{width:50%;padding:4px;word-wrap:break-word;word-break:break-all}.profile-card--description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-style:normal}.description[_ngcontent-%COMP%]{font-size:18px;font-style:italic}.avatar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:flex-end;width:40%;height:100%}"]})}return o})()}];let J=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(S),f.Bz]})}return o})(),L=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[u.ez,J]})}return o})()}}]);