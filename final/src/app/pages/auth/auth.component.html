<div class="form-container">
  <h2 class="form-title">Log In</h2>
  <form
    class="form"
    (submit)="onSubmit()"
    [formGroup]="registerForm">
    <mat-form-field
      color="accent"
      class="form-input">
      <mat-label>Email</mat-label>
      <input
        matInput
        formControlName="email" />
      @if (
        !registerForm.get('email')?.valid &&
        !registerForm.get('email')?.hasError('required') &&
        !registerForm.get('email')?.hasError('isEmailExist')
      ) {
        <mat-error
          >The email is invalid! (&#35;&#35;&#64;&#35;&#35;&#46;&#35;&#35;)
        </mat-error>
      }
      @if (registerForm.get('email')!.hasError('required')) {
        <mat-error>Please enter your email! </mat-error>
      }
      @if (registerForm.get('email')?.hasError('isEmailExist')) {
        <mat-error
          >Email and/or password doesn't exist in the system.</mat-error
        >
      }
    </mat-form-field>

    <mat-form-field
      color="accent"
      class="form-input">
      <mat-label>Enter your password!</mat-label>
      <input
        matInput
        formControlName="password"
        [type]="hide ? 'password' : 'text'" />
      <button
        mat-icon-button
        matSuffix
        type="button"
        (click)="hide = !hide"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hide">
        <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>

      @if (registerForm.get('password')!.hasError('required')) {
        <mat-error>Please enter your password!</mat-error>
      }
      @if (
        registerForm.get('password')?.hasError('minlength') &&
        !registerForm.get('password')?.valid &&
        registerForm.get('password')?.touched
      ) {
        <mat-error
          >Min length password -
          {{
            registerForm.get('password')?.errors?.['minlength']?.[
              'requiredLength'
            ]
          }}, your length -
          {{
            registerForm.get('password')?.errors?.['minlength']?.[
              'actualLength'
            ]
          }}</mat-error
        >
      }
      @if (registerForm.get('password')?.hasError('invalidPassword')) {
        <mat-error
          >Your password isn't strong enough! - (!12qQ#%$S#s)</mat-error
        >
      }
      @if (registerForm.get('password')?.hasError('isPasswordExist')) {
        <mat-error
          >Email and/or password doesn't exist in the system.</mat-error
        >
      }
    </mat-form-field>

    <button
      mat-raised-button
      class="form-btn"
      color="primary"
      type="submit"
      [disabled]="isDisabled ? !registerForm.valid : registerForm.valid">
      Register
    </button>
  </form>
</div>
