import{a as X,b as Z,c as tt,d as et,e as it,f as ot,g as c,h as nt,i as at,j as st,k as lt,l as mt,m as ut,n as dt,o as pt,p as ct}from"./chunk-DCIAUUJB.js";import{C as L,Cb as V,Db as z,Eb as U,Fb as $,Gb as Y,H as f,Hb as H,Ja as j,Jb as Q,L as N,M as g,Mb as J,Nb as K,Ob as W,Ra as D,Sa as G,Tb as rt,Ua as F,Ub as ht,Y as l,Z as p,ca as T,da as v,fa as _,ga as d,h as y,ha as o,ia as a,ib as B,ja as b,m as k,na as x,oa as q,pb as S,q as I,sa as s,t as R,ta as A,ua as P,wa as O}from"./chunk-P3MNZRFH.js";function vt(i,t){i&1&&(o(0,"mat-error"),s(1,"The email is invalid! (##@##.##) "),a())}function Et(i,t){i&1&&(o(0,"mat-error"),s(1,"Please enter your email! "),a())}function _t(i,t){i&1&&(o(0,"mat-error"),s(1,"Email and/or password doesn't exist in the system."),a())}function bt(i,t){i&1&&(o(0,"mat-error"),s(1,"Please enter your password!"),a())}function xt(i,t){if(i&1&&(o(0,"mat-error"),s(1),a()),i&2){let w=q(),r;l(1),P("Min length password - ",(r=w.authForm.get("password"))==null||r.errors==null||r.errors.minlength==null?null:r.errors.minlength.requiredLength,", your length - ",(r=w.authForm.get("password"))==null||r.errors==null||r.errors.minlength==null?null:r.errors.minlength.actualLength,"")}}function Ft(i,t){i&1&&(o(0,"mat-error"),s(1,"Your password isn't strong enough! - (!12qQ#%$S#s)"),a())}function St(i,t){i&1&&(o(0,"mat-error"),s(1,"Email and/or password doesn't exist in the system."),a())}var E=(()=>{let t=class t{constructor(r,m,e,n,h,u){this.authService=r,this.fb=m,this.toast=e,this.store=n,this.router=h,this.localStor=u,this.hide=!0,this.isDisabled=!0,this.isErrorRequest=!1}ngOnInit(){this.store.select(Q).pipe(L(r=>{r&&this.router.navigate(["/"])}),R(1)).subscribe(),this.authForm=this.fb.group({email:["",[c.email,c.required]],password:["",[ht(),c.minLength(8),c.required]]}),this.authForm.valueChanges.subscribe(()=>{this.isErrorRequest&&this.authForm.controls.email.valid&&(this.authForm.controls.password.setErrors(null),this.isErrorRequest=!1),this.isErrorRequest&&this.authForm.controls.password.valid&&(this.authForm.controls.email.setErrors(null),this.isErrorRequest=!1)})}onSubmit(){this.isDisabled=!1;let r={email:this.authForm.controls.email.value,password:this.authForm.controls.password.value};this.authService.auth(r).pipe(k(e=>{this.localStor.loginSuccess({email:this.authForm.controls.email.value,uid:e.uid,token:e.token}),this.store.dispatch(H.updateUserLogged({isLogged:!0})),this.toast.openSnack("Login success",!1),this.isErrorRequest=!1,this.isDisabled=!0,this.router.navigate(["/"])}),I(e=>{let{error:n}=e;return n===null&&this.toast.openSnack(e.statusText,!0),n.type===S.USER_ERROR_LOGIN&&(this.toast.openSnack(n.message,!0),this.authForm.controls.email.setErrors({isEmailExist:!0}),this.authForm.controls.password.setErrors({isPasswordExist:!0}),this.isDisabled=!0,this.isErrorRequest=!0),n.type===S.INVALID_LOGIN_FORM&&this.toast.openSnack(n.message,!0),y})).subscribe()}};t.\u0275fac=function(m){return new(m||t)(p(J),p(ut),p(K),p(B),p(D),p(W))},t.\u0275cmp=N({type:t,selectors:[["app-auth"]],standalone:!0,features:[O],decls:28,vars:13,consts:[[1,"form-container"],[1,"form",3,"formGroup","submit"],[1,"form-title"],["color","accent",1,"form-input"],["matInput","","formControlName","email"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"form-btn",3,"disabled"],[1,"form-link"],["routerLink","/signup",1,"form-link--click"]],template:function(m,e){if(m&1&&(o(0,"div",0)(1,"form",1),x("submit",function(){return e.onSubmit()}),o(2,"h2",2),s(3,"Log In"),a(),o(4,"mat-form-field",3)(5,"mat-label"),s(6,"Email"),a(),b(7,"input",4),_(8,vt,2,0,"mat-error")(9,Et,2,0,"mat-error")(10,_t,2,0,"mat-error"),a(),o(11,"mat-form-field",3)(12,"mat-label"),s(13,"Enter your password!"),a(),b(14,"input",5),o(15,"button",6),x("click",function(){return e.hide=!e.hide}),o(16,"mat-icon"),s(17),a()(),_(18,bt,2,0,"mat-error")(19,xt,2,2,"mat-error")(20,Ft,2,0,"mat-error")(21,St,2,0,"mat-error"),a(),o(22,"button",7),s(23," Register "),a(),o(24,"h4",8),s(25," Not yet registered? \u2043\xA0 "),o(26,"a",9),s(27,"Register"),a()()()()),m&2){let n,h,u,C,M;l(1),v("formGroup",e.authForm),l(7),d(8,!((n=e.authForm.get("email"))!=null&&n.valid)&&!((n=e.authForm.get("email"))!=null&&n.hasError("required"))&&!((n=e.authForm.get("email"))!=null&&n.hasError("isEmailExist"))?8:-1),l(1),d(9,e.authForm.get("email").hasError("required")?9:-1),l(1),d(10,(h=e.authForm.get("email"))!=null&&h.hasError("isEmailExist")?10:-1),l(4),v("type",e.hide?"password":"text"),l(1),T("aria-label","Hide password")("aria-pressed",e.hide),l(2),A(e.hide?"visibility_off":"visibility"),l(1),d(18,e.authForm.get("password").hasError("required")?18:-1),l(1),d(19,(u=e.authForm.get("password"))!=null&&u.hasError("minlength")&&!((u=e.authForm.get("password"))!=null&&u.valid)&&((u=e.authForm.get("password"))!=null&&u.touched)?19:-1),l(1),d(20,(C=e.authForm.get("password"))!=null&&C.hasError("invalidPassword")?20:-1),l(1),d(21,(M=e.authForm.get("password"))!=null&&M.hasError("isPasswordExist")?21:-1),l(1),v("disabled",e.isDisabled?!e.authForm.valid:e.authForm.valid)}},dependencies:[it,et,X,Z,tt,Y,$,rt,U,V,z,ct,pt,dt,st,ot,nt,at,lt,mt,G],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:end;gap:18px;width:100%;max-width:380px;margin:0 auto;padding:10px;box-shadow:0 0 16px var(--shadow);background:var(--background-form);border-radius:10px}.form-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;height:calc(100vh - 84px);border-radius:10px}.form-title[_ngcontent-%COMP%]{display:flex;align-items:start;width:100%;font-size:22px}.form-input[_ngcontent-%COMP%]{width:100%}.form-btn[_ngcontent-%COMP%]{margin-top:10px;width:120px;font-size:18px;font-weight:500}.form-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;font-size:14px}.form-link--click[_ngcontent-%COMP%]{color:var(--link);transition:color .2s ease-out}.form-link--click[_ngcontent-%COMP%]:hover{color:var(--link-hover)}"]});let i=t;return i})();var wt=[{path:"",component:E}],gt=(()=>{let t=class t{};t.\u0275fac=function(m){return new(m||t)},t.\u0275mod=g({type:t}),t.\u0275inj=f({imports:[F.forChild(wt),F]});let i=t;return i})();var Wt=(()=>{let t=class t{};t.\u0275fac=function(m){return new(m||t)},t.\u0275mod=g({type:t}),t.\u0275inj=f({imports:[j,E,gt]});let i=t;return i})();export{Wt as AuthModule};
