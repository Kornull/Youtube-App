import{a as W,b as X,d as Z,e as ee,f as ne,g as E,h as ie,i as oe,j as re,k as ae,l as le,m as me,n as se,o as de,p as pe}from"./chunk-DCIAUUJB.js";import{$ as k,Cb as S,Eb as N,Fb as H,Ga as G,Gb as I,Ia as z,Ib as V,Ja as R,Ka as $,Kb as J,L as g,Nb as K,O as L,P as _,Pb as Q,Q as x,Tb as te,Wb as ce,Xb as ue,Y as s,Z as h,da as C,fa as F,ga as u,h as y,ha as o,ia as a,ib as Y,ja as O,ka as P,m as j,na as f,oa as d,q as U,sa as l,ta as b,u as D,ua as T,va as B,wa as v,xa as A,ya as q}from"./chunk-P3MNZRFH.js";function _e(t,i){t&1&&(o(0,"mat-error"),l(1,"Please enter your name!"),a())}function xe(t,i){if(t&1&&(o(0,"mat-error"),l(1),a()),t&2){let m=d(),e;s(1),T("Min name len - ",((e=m.updateForm.get("name"))==null||e.errors==null||e.errors.minlength==null?null:e.errors.minlength.requiredLength)||"2",", name now - ",((e=m.updateForm.get("name"))==null||e.errors==null||e.errors.minlength==null?null:e.errors.minlength.actualLength)||"0","")}}function Ce(t,i){if(t&1&&(o(0,"mat-error"),l(1),a()),t&2){let m=d(),e;s(1),T("Max name len - ",(e=m.updateForm.get("name"))==null||e.errors==null||e.errors.maxlength==null?null:e.errors.maxlength.requiredLength,", name len now - ",(e=m.updateForm.get("name"))==null||e.errors==null||e.errors.maxlength==null?null:e.errors.maxlength.actualLength,"")}}function ve(t,i){t&1&&(o(0,"mat-error"),l(1,"Name cannot contain numbers or special signs."),a())}function Fe(t,i){t&1&&(o(0,"mat-error"),l(1,"Same name."),a())}var he=(()=>{let i=class i{constructor(e){this.fb=e,this.newName=new k,this.validForm=new k,this.disabledInput=!1,this.nameNow=this.oldName,this.updateForm=this.fb.group({name:["",[E.minLength(2),E.maxLength(40),E.required,ce(),ue(this.oldName)]]})}ngOnInit(){this.updateForm.controls.name.setValue(this.oldName)}ngOnChanges(){this.disabledInput===!0?this.updateForm.controls.name.disable():this.updateForm.controls.name.enable()}onChange(){this.updateForm.controls.name.value===this.oldName&&this.updateForm.controls.name.setErrors({sameName:!0}),this.newName.emit(this.updateForm.controls.name.value),this.validForm.emit(this.updateForm.valid)}};i.\u0275fac=function(n){return new(n||i)(h(me))},i.\u0275cmp=g({type:i,selectors:[["app-profile-form"]],inputs:{oldName:"oldName",isSaveChanges:"isSaveChanges",disabledInput:"disabledInput"},outputs:{newName:"newName",validForm:"validForm"},standalone:!0,features:[L,v],decls:11,vars:6,consts:[[1,"form-container"],[1,"form",3,"formGroup"],["color","accent",1,"form-input"],["matInput","","formControlName","name",3,"ngModelChange"]],template:function(n,r){if(n&1&&(o(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),l(4,"Name"),a(),o(5,"input",3),f("ngModelChange",function(){return r.onChange()}),a(),F(6,_e,2,0,"mat-error")(7,xe,2,2,"mat-error")(8,Ce,2,2,"mat-error")(9,ve,2,0,"mat-error")(10,Fe,2,0,"mat-error"),a()()()),n&2){let p,c,M,w;s(1),C("formGroup",r.updateForm),s(5),u(6,r.updateForm.get("name").hasError("required")?6:-1),s(1),u(7,(p=r.updateForm.get("name"))!=null&&p.hasError("minlength")&&((p=r.updateForm.get("name"))!=null&&p.touched)?7:-1),s(1),u(8,(c=r.updateForm.get("name"))!=null&&c.hasError("maxlength")&&((c=r.updateForm.get("name"))!=null&&c.touched)?8:-1),s(1),u(9,(M=r.updateForm.get("name"))!=null&&M.hasError("invalidName")?9:-1),s(1),u(10,(w=r.updateForm.get("name"))!=null&&w.hasError("sameName")?10:-1)}},dependencies:[ee,Z,W,X,te,pe,de,se,re,ne,ie,oe,ae,le],styles:[".form[_ngcontent-%COMP%]{background:rgba(0,0,0,0)}.form-container[_ngcontent-%COMP%]{padding:0}.form-input[_ngcontent-%COMP%]{width:100%}  .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#00800000!important;height:50px!important}"]});let t=i;return t})();var ge=(()=>{let i=class i{constructor(e){this.document=e}logout(){let e=document.cookie.split(";"),n={};for(let r=0;r<e.length;r+=1){let p=e[r].trim(),c=p.indexOf("="),M=c>-1?p.substring(0,c):p,w=c>-1?p.substring(c+1):"";n[M]=decodeURIComponent(w)}return console.log(n),n}};i.\u0275fac=function(n){return new(n||i)(h(G))},i.\u0275cmp=g({type:i,selectors:[["app-profile-logout-btn"]],standalone:!0,features:[v],decls:4,vars:0,consts:[["mat-button","",1,"logout",3,"click"]],template:function(n,r){n&1&&(o(0,"button",0),f("click",function(){return r.logout()}),l(1,"Logout "),o(2,"mat-icon"),l(3,"input"),a()())},dependencies:[N,S,I,H],styles:[".logout[_ngcontent-%COMP%]{position:absolute;top:0;right:0}"]});let t=i;return t})();function Me(t,i){if(t&1&&(o(0,"h3",9),l(1," Name: "),o(2,"span"),l(3),a()()),t&2){let m=d();s(3),b(m.name)}}function we(t,i){if(t&1){let m=P();o(0,"app-profile-form",12),f("newName",function(n){_(m);let r=d();return x(r.newName=n)})("validForm",function(n){_(m);let r=d();return x(r.validForm=n)}),a()}if(t&2){let m=d();C("oldName",m.name)("disabledInput",m.reset)}}function Pe(t,i){if(t&1){let m=P();o(0,"button",13),f("click",function(){_(m);let n=d();return x(n.onChangeUserInfo())}),l(1," Change "),a()}}function Se(t,i){if(t&1){let m=P();o(0,"button",14),f("click",function(){_(m);let n=d();return x(n.onCloseInput())}),l(1," Cancel"),a(),o(2,"button",15),f("click",function(){_(m);let n=d();return x(n.onSaveChanges())}),l(3," Save "),a()}if(t&2){let m=d();C("disabled",m.reset),s(2),C("disabled",!m.validForm)}}var tt=(()=>{let i=class i{constructor(e,n,r){this.store=e,this.updateName=n,this.toast=r,this.newName="",this.validForm=!1,this.isUpdateProfile=!1,this.saveChanges=!1,this.reset=!1,this.name="",this.email="",this.createAt="",this.uid=""}ngOnInit(){this.userProfileInfo$=this.store.select(J).pipe(j(e=>e===null?(this.store.dispatch(V.getUserInfo()),null):e)),this.userProfileInfo$.subscribe(e=>{e!==null&&(this.name=e.name,this.email=e.email,this.uid=e.uid,this.createAt=e.createdAt)})}onChangeUserInfo(){this.isUpdateProfile=!0}onCloseInput(){this.isUpdateProfile=!1,this.validForm=!1}onSaveChanges(){this.validForm&&this.updateName.setUserName(this.newName).pipe(D(()=>(this.toast.openSnack("Name updated successfully",!1),this.store.dispatch(V.changeProfileName({name:this.newName})),this.name=this.newName,this.isUpdateProfile=!1,this.reset=!1,y)),U(e=>{let{error:n}=e;return n===null?this.toast.openSnack(e.statusText,!0):this.toast.openSnack(n.message,!0),this.validForm=!0,this.reset=!1,y})).subscribe(),this.validForm=!1,this.reset=!0}};i.\u0275fac=function(n){return new(n||i)(h(Y),h(Q),h(K))},i.\u0275cmp=g({type:i,selectors:[["app-profile"]],standalone:!0,features:[B([$]),v],decls:28,vars:8,consts:[[1,"profile-container"],[1,"profile"],[1,"profile-title"],[1,"profile-card"],[1,"avatar"],[1,"profile-card--avatar"],["src","./assets/ava.png","priority","","alt","",1,"profile-card--img"],[1,"profile-card--description"],["class","description"],[1,"description"],[1,"profile-btn--block"],["mat-raised-button","","color","accent"],[3,"oldName","disabledInput","newName","validForm"],["mat-raised-button","","color","accent",3,"click"],["mat-stroked-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1),O(2,"app-profile-logout-btn"),o(3,"h2",2),l(4,"Profile:"),a(),o(5,"div",3)(6,"div",4)(7,"div",5),O(8,"img",6),a()(),o(9,"div",7),F(10,Me,4,1,"h3",8)(11,we,1,2),o(12,"h3",9),l(13," Email: "),o(14,"span"),l(15),a()(),o(16,"h3",9),l(17," Id: "),o(18,"span"),l(19),a()(),o(20,"h3",9),l(21," Register date: "),o(22,"span"),l(23),A(24,"date"),a()()()(),o(25,"div",10),F(26,Pe,2,0,"button",11)(27,Se,4,2),a()()()),n&2&&(s(10),u(10,r.isUpdateProfile?11:10),s(5),b(r.email),s(4),b(r.uid),s(4),b(q(24,5,r.createAt,"medium")),s(3),u(26,r.isUpdateProfile?27:26))},dependencies:[R,z,N,S,I,he,ge],styles:[".profile[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;height:400px;width:90%;gap:14px;padding:12px}.profile-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:end;width:100%;max-width:980px;padding:10px;margin:0 auto;background:var(--profile)}.profile-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;width:100%;max-width:536px;padding:10px;font-size:29px;margin:0}.profile-btn--block[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;width:100%}.profile-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;gap:14px;max-width:760px;margin-bottom:30px}.profile-card--img[_ngcontent-%COMP%]{width:100%;max-width:180px}.profile-card--avatar[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.profile-card--description[_ngcontent-%COMP%]{width:50%;padding:4px;word-wrap:break-word;word-break:break-all}.profile-card--description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-style:normal}.description[_ngcontent-%COMP%]{font-size:18px;font-style:italic}.avatar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:flex-end;width:40%;height:100%}"]});let t=i;return t})();export{tt as a};
