import{a as ee,b as te,c as re,d as ie,e as ne,f as ae,g as p,h as le,i as me,j as se,k as ue,l as de,m as pe,n as ce,o as ge,p as fe}from"./chunk-DCIAUUJB.js";import{A as P,C as j,Cb as $,Db as Y,Eb as H,Fb as Q,Gb as X,H as _,Hb as J,Ja as B,Jb as K,L as q,Lb as W,M as v,Nb as Z,Ra as G,Sa as U,Tb as oe,Ua as y,Ub as he,Vb as _e,Wb as ve,Y as a,Z as h,ca as D,da as x,fa as C,ga as u,h as M,ha as n,ia as o,ib as z,ja as F,na as w,oa as E,pb as I,q as N,sa as l,t as L,ta as O,ua as S,va as V,wa as A}from"./chunk-P3MNZRFH.js";function Fe(t,r){t&1&&(n(0,"mat-error"),l(1,"Please enter your name!"),o())}function Ee(t,r){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let d=E(),e;a(1),S("Min name len - ",((e=d.registerForm.get("name"))==null||e.errors==null||e.errors.minlength==null?null:e.errors.minlength.requiredLength)||"2",", name now - ",((e=d.registerForm.get("name"))==null||e.errors==null||e.errors.minlength==null?null:e.errors.minlength.actualLength)||"0","")}}function Se(t,r){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let d=E(),e;a(1),S("Max name len - ",(e=d.registerForm.get("name"))==null||e.errors==null||e.errors.maxlength==null?null:e.errors.maxlength.requiredLength,", name len now - ",(e=d.registerForm.get("name"))==null||e.errors==null||e.errors.maxlength==null?null:e.errors.maxlength.actualLength,"")}}function be(t,r){t&1&&(n(0,"mat-error"),l(1,"Name cannot contain numbers or special signs."),o())}function Me(t,r){t&1&&(n(0,"mat-error"),l(1,"The email is invalid! (##@##.##) "),o())}function we(t,r){t&1&&(n(0,"mat-error"),l(1,"Please enter your email! "),o())}function ye(t,r){t&1&&(n(0,"mat-error"),l(1,"User already exists!"),o())}function Ie(t,r){t&1&&(n(0,"mat-error"),l(1,"Please enter your password!"),o())}function ke(t,r){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let d=E(),e;a(1),S("Min length password - ",(e=d.registerForm.get("password"))==null||e.errors==null||e.errors.minlength==null?null:e.errors.minlength.requiredLength,", your length - ",(e=d.registerForm.get("password"))==null||e.errors==null||e.errors.minlength==null?null:e.errors.minlength.actualLength,"")}}function Re(t,r){t&1&&(n(0,"mat-error"),l(1,"Your password isn't strong enough! - (!12qQ#%$S#s)"),o())}var b=(()=>{let r=class r{constructor(e,s,i,m,c){this.regService=e,this.fb=s,this.toast=i,this.store=m,this.router=c,this.hide=!0,this.isDisabled=!0}ngOnInit(){this.store.select(K).pipe(j(e=>{e&&this.router.navigate(["/"])}),L(1)).subscribe(),this.registerForm=this.fb.group({name:["",[p.minLength(2),p.maxLength(40),p.required,ve()]],email:["",[p.email,p.required,_e()]],password:["",[he(),p.minLength(8),p.required]]})}onSubmit(){this.isDisabled=!1;let e={email:this.registerForm.controls.email.value,name:this.registerForm.controls.name.value,password:this.registerForm.controls.password.value};this.regService.userSignUp(e).pipe(P(()=>(this.toast.openSnack("Registration success",!1),this.router.navigate(["./signin"]),M)),N(i=>{let{error:m}=i;return m===null&&this.toast.openSnack(i.statusText,!0),m.type===I.USER_EXIST&&(this.toast.openSnack(m.message,!0),this.registerForm.controls.email.setErrors({emailExist:!0}),this.isDisabled=!0,this.store.dispatch(J.invalidRegister({email:this.registerForm.controls.email.value}))),m.type===I.INVALID_REG_FORM&&this.toast.openSnack(m.message,!0),M})).subscribe()}};r.\u0275fac=function(s){return new(s||r)(h(W),h(pe),h(Z),h(z),h(G))},r.\u0275cmp=q({type:r,selectors:[["app-registration"]],standalone:!0,features:[V([]),A],decls:35,vars:16,consts:[[1,"form-container"],[1,"form",3,"formGroup","submit"],[1,"form-title"],["color","accent",1,"form-input"],["matInput","","formControlName","name"],["matInput","","formControlName","email"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"form-btn",3,"disabled"],[1,"form-link"],["routerLink","/signin",1,"form-link--click"]],template:function(s,i){if(s&1&&(n(0,"div",0)(1,"form",1),w("submit",function(){return i.onSubmit()}),n(2,"h2",2),l(3,"Registration"),o(),n(4,"mat-form-field",3)(5,"mat-label"),l(6,"Name"),o(),F(7,"input",4),C(8,Fe,2,0,"mat-error")(9,Ee,2,2,"mat-error")(10,Se,2,2,"mat-error")(11,be,2,0,"mat-error"),o(),n(12,"mat-form-field",3)(13,"mat-label"),l(14,"Email"),o(),F(15,"input",5),C(16,Me,2,0,"mat-error")(17,we,2,0,"mat-error")(18,ye,2,0,"mat-error"),o(),n(19,"mat-form-field",3)(20,"mat-label"),l(21,"Enter your password!"),o(),F(22,"input",6),n(23,"button",7),w("click",function(){return i.hide=!i.hide}),n(24,"mat-icon"),l(25),o()(),C(26,Ie,2,0,"mat-error")(27,ke,2,2,"mat-error")(28,Re,2,0,"mat-error"),o(),n(29,"button",8),l(30," Register "),o(),n(31,"h4",9),l(32," Already have an account? \u2043\xA0 "),n(33,"a",10),l(34,"Login"),o()()()()),s&2){let m,c,k,g,R,f,T;a(1),x("formGroup",i.registerForm),a(7),u(8,i.registerForm.get("name").hasError("required")?8:-1),a(1),u(9,(m=i.registerForm.get("name"))!=null&&m.hasError("minlength")&&((m=i.registerForm.get("name"))!=null&&m.touched)?9:-1),a(1),u(10,(c=i.registerForm.get("name"))!=null&&c.hasError("maxlength")&&((c=i.registerForm.get("name"))!=null&&c.touched)?10:-1),a(1),u(11,(k=i.registerForm.get("name"))!=null&&k.hasError("invalidName")?11:-1),a(5),u(16,!((g=i.registerForm.get("email"))!=null&&g.valid)&&!((g=i.registerForm.get("email"))!=null&&g.hasError("required"))&&!((g=i.registerForm.get("email"))!=null&&g.hasError("emailExist"))?16:-1),a(1),u(17,i.registerForm.get("email").hasError("required")?17:-1),a(1),u(18,(R=i.registerForm.get("email"))!=null&&R.hasError("emailExist")?18:-1),a(4),x("type",i.hide?"password":"text"),a(1),D("aria-label","Hide password")("aria-pressed",i.hide),a(2),O(i.hide?"visibility_off":"visibility"),a(1),u(26,i.registerForm.get("password").hasError("required")?26:-1),a(1),u(27,(f=i.registerForm.get("password"))!=null&&f.hasError("minlength")&&!((f=i.registerForm.get("password"))!=null&&f.valid)&&((f=i.registerForm.get("password"))!=null&&f.touched)?27:-1),a(1),u(28,(T=i.registerForm.get("password"))!=null&&T.hasError("invalidPassword")?28:-1),a(1),x("disabled",i.isDisabled?!i.registerForm.valid:i.registerForm.valid)}},dependencies:[ne,ie,ee,te,re,X,Q,H,$,Y,fe,ge,oe,ce,se,ae,le,me,ue,de,U],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:end;gap:18px;width:100%;max-width:380px;margin:0 auto;padding:10px;box-shadow:0 0 16px var(--shadow);background:var(--background-form);border-radius:10px}.form-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;height:calc(100vh - 84px)}.form-title[_ngcontent-%COMP%]{display:flex;align-items:start;width:100%;font-size:22px}.form-input[_ngcontent-%COMP%]{width:100%}.form-btn[_ngcontent-%COMP%]{margin-top:10px;width:120px;font-size:18px;font-weight:500}.form-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;font-size:14px}.form-link--click[_ngcontent-%COMP%]{color:var(--link);transition:color .2s ease-out}.form-link--click[_ngcontent-%COMP%]:hover{color:var(--link-hover)}"]});let t=r;return t})();var Te=[{path:"",component:b}],Ce=(()=>{let r=class r{};r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=v({type:r}),r.\u0275inj=_({imports:[y.forChild(Te),y]});let t=r;return t})();var nt=(()=>{let r=class r{};r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=v({type:r}),r.\u0275inj=_({imports:[B,b,Ce]});let t=r;return t})();export{nt as RegistrationModule};
