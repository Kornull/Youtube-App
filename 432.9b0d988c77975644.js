"use strict";(self.webpackChunkfinal=self.webpackChunkfinal||[]).push([[432],{6432:(X,f,l)=>{l.r(f),l.d(f,{MainModule:()=>E});var d=l(6814),_=l(5959),C=l(9397),u=l(2296),g=l(617),p=l(7700),s=l(6223),v=l(2032),m=l(8165),c=l(6146),t=l(9212),h=l(4221);function Z(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter your name!"),t.qZA())}function O(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.AsE("Min name len - ",(null==(n=o.createGroup.get("title"))||null==n.errors||null==n.errors.minlength?null:n.errors.minlength.requiredLength)||"2",", name now - ",(null==(n=o.createGroup.get("title"))||null==n.errors||null==n.errors.minlength?null:n.errors.minlength.actualLength)||"0","")}}function y(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.AsE("Max name len - ",null==(n=o.createGroup.get("title"))||null==n.errors||null==n.errors.maxlength?null:n.errors.maxlength.requiredLength,", name len now - ",null==(n=o.createGroup.get("title"))||null==n.errors||null==n.errors.maxlength?null:n.errors.maxlength.actualLength,"")}}function P(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Name cannot contain special signs."),t.qZA())}let T=(()=>{class e{constructor(o,n,i){this.dialog=o,this.fb=n,this.store=i}ngOnInit(){this.createGroup=this.fb.group({title:["",[s.kI.minLength(2),s.kI.maxLength(30),s.kI.required,e=>{const{value:r}=e;return r&&/[!@_+#%({}[\]\\/)=$^<>&*-]+/.test(r)?{invalidTitle:!0}:null}]]})}onNoClick(){this.dialog.closeAll()}onSubmit(){this.store.dispatch(c.gn.setOwnGroup({titleGroup:this.createGroup.controls.title.value}))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.uw),t.Y36(s.qu),t.Y36(h.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-modal"]],standalone:!0,features:[t.jDz],decls:16,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"form",3,"formGroup","submit"],["color","accent",1,"form-input"],["matInput","","formControlName","title"],["mat-dialog-actions",""],["mat-raised-button","","type","button",1,"btn-close",3,"click"],["mat-raised-button","","type","submit",1,"btn-create",3,"disabled"]],template:function(n,i){if(1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Create Group"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("submit",function(){return i.onSubmit()}),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Favorite Animal"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,Z,2,0,"mat-error")(8,O,2,2,"mat-error")(9,y,2,2,"mat-error")(10,P,2,0,"mat-error"),t.qZA(),t.TgZ(11,"div",4)(12,"button",5),t.NdJ("click",function(){return i.onNoClick()}),t._uU(13," Close "),t.qZA(),t.TgZ(14,"button",6),t._uU(15," Create "),t.qZA()()()),2&n){let a,x,w;t.xp6(2),t.Q6J("formGroup",i.createGroup),t.xp6(5),t.um2(7,i.createGroup.get("title").hasError("required")?7:-1),t.xp6(1),t.um2(8,null!=(a=i.createGroup.get("title"))&&a.hasError("minlength")&&null!=(a=i.createGroup.get("title"))&&a.touched?8:-1),t.xp6(1),t.um2(9,null!=(x=i.createGroup.get("title"))&&x.hasError("maxlength")&&null!=(x=i.createGroup.get("title"))&&x.touched?9:-1),t.xp6(1),t.um2(10,null!=(w=i.createGroup.get("title"))&&w.hasError("invalidTitle")?10:-1),t.xp6(4),t.Q6J("disabled",!i.createGroup.valid)}},dependencies:[m.lN,m.KE,m.hX,m.TO,v.c,v.Nt,s.u5,s._Y,s.Fj,s.JJ,s.JL,u.ot,u.lW,p.uh,p.xY,p.H8,s.UX,s.sg,s.u],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:100%}.form-input[_ngcontent-%COMP%]{width:100%}.btn-close[_ngcontent-%COMP%]{transition:box-shadow .2s linear}.btn-close[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.btn-create[_ngcontent-%COMP%]{background-color:var(--btn-group--bg)!important;color:var(--default-color)!important;transition:box-shadow .2s linear}.btn-create[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}[_ngcontent-%COMP%]:disabled{background:#c5c5c5!important;color:#e9e9e9!important}"]})}return e})(),k=(()=>{class e{constructor(o,n,i){this.modal=o,this.store=n,this.data=i,this.title="",this.title=i.groupTitle}onNoClick(){this.modal.closeAll()}removeGroup(){this.store.dispatch(c.gn.removeOwnGroup({groupId:this.data.groupId}))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.uw),t.Y36(h.yh),t.Y36(p.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-modal"]],standalone:!0,features:[t.jDz],decls:11,vars:1,consts:[[1,"delete-group"],["mat-dialog-title","",1,"delete-group--title"],[1,"delete-group--btns"],["mat-raised-button","","type","button",1,"btn-close",3,"click"],["mat-raised-button","","type","button",1,"btn-delete",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2," Are you sure you want to delete the "),t.TgZ(3,"span"),t._uU(4),t.qZA(),t._uU(5," group? "),t.qZA(),t.TgZ(6,"div",2)(7,"button",3),t.NdJ("click",function(){return i.onNoClick()}),t._uU(8," Close "),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return i.removeGroup()}),t._uU(10," Remove "),t.qZA()()()),2&n&&(t.xp6(4),t.Oqu(i.title))},dependencies:[u.ot,u.lW,p.uh],styles:[".delete-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;gap:20px;height:100%}.delete-group--title[_ngcontent-%COMP%]{font-size:16px}.delete-group--title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline}.delete-group--btns[_ngcontent-%COMP%]{display:flex;padding:10px;align-items:center;justify-content:flex-end;gap:10px;width:100%}.btn-close[_ngcontent-%COMP%]{transition:box-shadow .2s linear}.btn-close[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.btn-delete[_ngcontent-%COMP%]{background-color:red!important;color:#fff!important;transition:box-shadow .2s linear}.btn-delete[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}"]})}return e})();var b=l(2913);const G=(e,r)=>r.name;function A(e,r){if(1&e&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"async"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,1,o.timeNow$)," s")}}function U(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,a=t.oxw();return t.KtG(a.deleteGroup(i.id.S,i.name.S))}),t.TgZ(1,"mat-icon",14),t._uU(2,"delete"),t.qZA()()}}const q=e=>({own:e});function j(e,r){if(1&e&&(t.TgZ(0,"li",8)(1,"div",9)(2,"span",10)(3,"mat-icon"),t._uU(4,"group"),t.qZA()(),t.TgZ(5,"a",11),t._uU(6),t.qZA()(),t.YNc(7,U,3,0,"button",12),t.qZA()),2&e){const o=r.$implicit,n=t.oxw();t.Q6J("ngClass",t.VKq(3,q,(null==n.loginInfo?null:n.loginInfo.uid)===o.createdBy.S)),t.xp6(6),t.hij(" ",o.name.S,""),t.xp6(1),t.um2(7,(null==n.loginInfo?null:n.loginInfo.uid)===o.createdBy.S?7:-1)}}function F(e,r){1&e&&(t.TgZ(0,"li",15),t._uU(1,"There are no groups."),t.qZA())}let N=(()=>{class e{constructor(o,n,i,a){this.timer=o,this.store=n,this.localStore=i,this.dialog=a,this.groups=[],this.groupsCount=0,this.loginInfo=null,this.loginInfo=this.localStore.getLoginInfo()}ngOnInit(){this.groups$=this.store.select(c.Bq).pipe((0,C.b)(o=>{o.Count?(this.groups=[...o.Items],this.groupsCount=o.Count):this.store.dispatch(c.gn.getGroupsList())})).subscribe(),this.timeNow$=this.timer.getCountdown(),this.disabledBtn$=this.timer.getRunTimer()}ngOnDestroy(){this.groups$.unsubscribe()}updateList(){this.timer.startCountdown(),this.store.dispatch(c.gn.getGroupsList())}createGroup(){this.dialog.open(T,{height:"300px",width:"400px"})}deleteGroup(o,n){this.dialog.open(k,{data:{groupTitle:n,groupId:o},minHeight:"200px",width:"400px"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(b._c),t.Y36(h.yh),t.Y36(b.n2),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-groups"]],standalone:!0,features:[t.jDz],decls:16,vars:8,consts:[[1,"group"],[1,"group-btn"],[1,"group-btn--update"],["mat-raised-button","","color","primary",1,"update-btn",3,"disabled","click"],["class","timer"],["mat-raised-button","","color","primary",1,"btn-create",3,"click"],[1,"group-list"],[1,"timer"],[1,"group-item",3,"ngClass"],[1,"group-item--info"],[1,"group-item--icon"],["href","#",1,"group-item--link"],["class","btn-delete"],[1,"btn-delete",3,"click"],[1,"btn-delete--icon"],[1,"group-item"],["class","group-item",3,"ngClass"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"button",3),t.NdJ("click",function(){return i.updateList()}),t.ALo(6,"async"),t._uU(7," Update list "),t.qZA(),t.YNc(8,A,3,3,"div",4),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.createGroup()}),t._uU(11," Create group "),t.qZA()(),t.TgZ(12,"ul",6),t.SjG(13,j,8,5,"li",16,G,!1,F,2,0),t.qZA()()),2&n&&(t.xp6(2),t.hij("Groups: ",i.groupsCount,""),t.xp6(3),t.Q6J("disabled",t.lcZ(6,4,i.disabledBtn$)),t.xp6(3),t.um2(8,t.lcZ(9,6,i.disabledBtn$)?8:-1),t.xp6(5),t.wJu(i.groups))},dependencies:[u.ot,u.lW,d.Ov,g.Ps,g.Hw,d.mk],styles:[".group[_ngcontent-%COMP%]{background:var(--profile);display:flex;flex-direction:column;gap:10px;width:100%;border:1px solid var(--border-main);box-shadow:0 0 4px var(--hover);border-radius:6px;padding:6px}.group-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.group-btn--update[_ngcontent-%COMP%]{display:flex;width:40%;align-items:center;justify-content:flex-start;gap:6px}.group-list[_ngcontent-%COMP%]{height:700px;border:1px solid var(--border-main);border-radius:4px;overflow-y:auto;overflow-x:hidden}.group-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;min-height:60px;padding:10px 20px;border-bottom:1px dashed var(--default-color)}.group-item--info[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:40px;justify-content:flex-start;gap:10px}.group-item--icon[_ngcontent-%COMP%]{height:24px;font-size:16px;color:var(--group-link)}.group-item--link[_ngcontent-%COMP%]{font-size:18px;color:var(--group-link);text-decoration:none;width:100%;transition:color .2s linear;text-wrap:wrap;word-wrap:break-word}.group-item--link[_ngcontent-%COMP%]:hover{color:var(--link-hover)}.group[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.group[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:5px 5px 5px -5px rgba(0,145,255,.979) inset;background-color:var(--group-link)}.group[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--link-hover)}.own[_ngcontent-%COMP%]{background:var(--conversation)}.update-btn[_ngcontent-%COMP%]{transition:box-shadow .2s linear}.update-btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.btn-create[_ngcontent-%COMP%]{background-color:var(--btn-group--bg)!important;color:var(--default-color)!important;transition:box-shadow .2s linear}.btn-create[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.btn-delete[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#0000!important;padding:0;margin:0 20px 0 0;border:none;border-radius:50%;cursor:pointer;color:var(--group-link);transition:color .2s linear}.btn-delete[_ngcontent-%COMP%]:hover{color:red!important}.btn-delete[_ngcontent-%COMP%]:active{color:#a80101!important}.btn-delete-icon[_ngcontent-%COMP%]{padding:0;margin:0;font-size:18px}.timer[_ngcontent-%COMP%]{text-align:center;padding:4px 8px;border-radius:12px;width:50px;border:1px dashed var(--default-color)}"]})}return e})();const I=(e,r)=>r.name;function J(e,r){if(1&e&&(t.TgZ(0,"div",6),t._uU(1),t.ALo(2,"async"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,1,o.timeNow$)," s")}}function L(e,r){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"sms"),t.qZA())}const Y=e=>({conversation:e});function $(e,r){if(1&e&&(t.TgZ(0,"li",7)(1,"div",8)(2,"span",9)(3,"mat-icon"),t._uU(4,"person_outline"),t.qZA()(),t.TgZ(5,"a",10),t._uU(6),t.qZA()(),t.YNc(7,L,2,0,"mat-icon"),t.qZA()),2&e){const o=r.$implicit;t.Q6J("ngClass",t.VKq(3,Y,o.isConversation)),t.xp6(6),t.hij(" ",o.name.S,""),t.xp6(1),t.um2(7,o.isConversation?7:-1)}}function S(e,r){1&e&&(t.TgZ(0,"li",11),t._uU(1,"There are no users."),t.qZA())}let z=(()=>{class e{constructor(o,n,i,a){this.timer=o,this.store=n,this.localStore=i,this.dialog=a,this.users=[],this.usersCount=0,this.loginInfo=null,this.loginInfo=this.localStore.getLoginInfo()}ngOnInit(){this.users$=this.store.select(c.Zg).pipe((0,C.b)(o=>{o.count?(this.users=[...o.users.filter(n=>n.uid.S!==this.loginInfo?.uid)],this.usersCount=o.count):this.store.dispatch(c.gn.getUsers())})).subscribe(),this.timeNow$=this.timer.getCountdown(),this.disabledBtn$=this.timer.getRunTimer()}ngOnDestroy(){this.users$.unsubscribe()}updateList(){this.timer.startCountdown(),this.store.dispatch(c.gn.getUsers()),this.updateConversations()}updateConversations(){this.store.dispatch(c.gn.getConversations())}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(b.MA),t.Y36(h.yh),t.Y36(b.n2),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-people"]],standalone:!0,features:[t.jDz],decls:14,vars:8,consts:[[1,"people"],[1,"people-btn"],[1,"people-btn--update"],["mat-raised-button","","color","primary",1,"update-btn",3,"disabled","click"],["class","timer"],[1,"people-list"],[1,"timer"],[1,"people-item",3,"ngClass"],[1,"people-item--info"],[1,"people-item--icon"],["href","#",1,"people-item--link"],[1,"people-item"],["class","people-item",3,"ngClass"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"button",3),t.NdJ("click",function(){return i.updateList()}),t.ALo(6,"async"),t._uU(7," Update list "),t.qZA(),t.YNc(8,J,3,3,"div",4),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"ul",5),t.SjG(11,$,8,5,"li",12,I,!1,S,2,0),t.qZA()()),2&n&&(t.xp6(2),t.hij("Users: ",i.usersCount,""),t.xp6(3),t.Q6J("disabled",t.lcZ(6,4,i.disabledBtn$)),t.xp6(3),t.um2(8,t.lcZ(9,6,i.disabledBtn$)?8:-1),t.xp6(3),t.wJu(i.users))},dependencies:[u.ot,u.lW,d.Ov,g.Ps,g.Hw,d.mk],styles:[".people[_ngcontent-%COMP%]{background:var(--profile);display:flex;flex-direction:column;gap:10px;width:100%;border:1px solid var(--border-main);box-shadow:0 0 4px var(--hover);border-radius:6px;padding:6px}.people-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.people-btn--update[_ngcontent-%COMP%]{display:flex;width:40%;align-items:center;justify-content:flex-start;gap:6px}.people-list[_ngcontent-%COMP%]{height:700px;border:1px solid var(--border-main);border-radius:4px;overflow-y:auto;overflow-x:hidden}.people-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;min-height:60px;padding:10px 20px;border-bottom:1px dashed var(--default-color)}.people-item--info[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:40px;justify-content:flex-start;gap:10px}.people-item--icon[_ngcontent-%COMP%]{height:24px;font-size:16px;color:var(--group-link)}.people-item--link[_ngcontent-%COMP%]{font-size:18px;color:var(--group-link);text-decoration:none;width:100%;transition:color .2s linear;text-wrap:wrap;word-wrap:break-word}.people-item--link[_ngcontent-%COMP%]:hover{color:var(--link-hover)}.people[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.people[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:5px 5px 5px -5px rgba(0,145,255,.9803921569) inset;background-color:var(--group-link)}.people[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--link-hover);cursor:pointer}.conversation[_ngcontent-%COMP%]{background:var(--conversation)}.update-btn[_ngcontent-%COMP%]{transition:box-shadow .2s linear}.update-btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.btn-create[_ngcontent-%COMP%]{background-color:var(--btn-group--bg)!important;color:var(--default-color)!important;transition:box-shadow .2s linear}.btn-create[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px var(--hover)!important}.timer[_ngcontent-%COMP%]{text-align:center;padding:4px 8px;border-radius:12px;width:50px;border:1px dashed var(--default-color)}"]})}return e})();const B=[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-main"]],standalone:!0,features:[t.jDz],decls:5,vars:0,consts:[[1,"main-section"],[1,"main-groups"],[1,"main-people"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-main-groups"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-main-people"),t.qZA()())},dependencies:[N,z],styles:[".main-section[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;gap:10px;max-width:1420px;height:calc(100vh - 84px);margin:0 auto}.main-groups[_ngcontent-%COMP%], .main-people[_ngcontent-%COMP%]{width:50%}"]})}return e})()}];let D=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(B),_.Bz]})}return e})(),E=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[d.ez,D]})}return e})()}}]);