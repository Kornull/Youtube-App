"use strict";(self.webpackChunkfinal=self.webpackChunkfinal||[]).push([[604],{604:(z,f,s)=>{s.r(f),s.d(f,{AuthModule:()=>D});var y=s(6814),C=s(9397),T=s(8180),b=s(7398),w=s(6306),U=s(6232),n=s(6223),h=s(4087),m=s(8165),g=s(617),R=s(1274),p=s(2296),v=s(2032),S=s(9),E=s(7768),x=s(6146),t=s(9212),c=s(9922),O=s(4221);function P(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"The email is invalid! (##@##.##) "),t.qZA())}function I(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter your email! "),t.qZA())}function L(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Email and/or password doesn't exist in the system."),t.qZA())}function M(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter your password!"),t.qZA())}function k(o,u){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const a=t.oxw();let e;t.xp6(1),t.AsE("Min length password - ",null==(e=a.authForm.get("password"))||null==e.errors||null==e.errors.minlength?null:e.errors.minlength.requiredLength,", your length - ",null==(e=a.authForm.get("password"))||null==e.errors||null==e.errors.minlength?null:e.errors.minlength.actualLength,"")}}function q(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Your password isn't strong enough! - (!12qQ#%$S#s)"),t.qZA())}function N(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Email and/or password doesn't exist in the system."),t.qZA())}let Z=(()=>{class o{constructor(a,e,r,i,d,l){this.authService=a,this.fb=e,this.toast=r,this.store=i,this.router=d,this.localStor=l,this.hide=!0,this.isDisabled=!0,this.isErrorRequest=!1}ngOnInit(){this.store.select(x.KD).pipe((0,C.b)(a=>{a&&this.router.navigate(["/"])}),(0,T.q)(1)).subscribe(),this.authForm=this.fb.group({email:["",[n.kI.email,n.kI.required]],password:["",[(0,S.ym)(),n.kI.minLength(8),n.kI.required]]}),this.authForm.valueChanges.subscribe(()=>{this.isErrorRequest&&this.authForm.controls.email.valid&&(this.authForm.controls.password.setErrors(null),this.isErrorRequest=!1),this.isErrorRequest&&this.authForm.controls.password.valid&&(this.authForm.controls.email.setErrors(null),this.isErrorRequest=!1)})}onSubmit(){this.isDisabled=!1,this.authService.auth({email:this.authForm.controls.email.value,password:this.authForm.controls.password.value}).pipe((0,b.U)(r=>{this.localStor.loginSuccess({email:this.authForm.controls.email.value,uid:r.uid,token:r.token}),this.store.dispatch(x.uQ.updateUserLogged({isLogged:!0})),this.toast.openSnack("Login success",!1),this.isErrorRequest=!1,this.isDisabled=!0,this.router.navigate(["/"])}),(0,w.K)(r=>{const{error:i}=r;return null===i&&this.toast.openSnack(r.statusText,!0),i.type===E.ZB.USER_ERROR_LOGIN&&(this.toast.openSnack(i.message,!0),this.authForm.controls.email.setErrors({isEmailExist:!0}),this.authForm.controls.password.setErrors({isPasswordExist:!0}),this.isDisabled=!0,this.isErrorRequest=!0),i.type===E.ZB.INVALID_LOGIN_FORM&&this.toast.openSnack(i.message,!0),U.E})).subscribe()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(c.e8),t.Y36(n.qu),t.Y36(c.cw),t.Y36(O.yh),t.Y36(h.F0),t.Y36(c.n2))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth"]],standalone:!0,features:[t.jDz],decls:28,vars:13,consts:[[1,"form-container"],[1,"form",3,"formGroup","submit"],[1,"form-title"],["color","accent",1,"form-input"],["matInput","","formControlName","email","autocomplete","off"],["matInput","","formControlName","password","autocomplete","off",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"form-btn",3,"disabled"],[1,"form-link"],["routerLink","/signup",1,"form-link--click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return r.onSubmit()}),t.TgZ(2,"h2",2),t._uU(3,"Log In"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Email"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,P,2,0,"mat-error")(9,I,2,0,"mat-error")(10,L,2,0,"mat-error"),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Enter your password!"),t.qZA(),t._UZ(14,"input",5),t.TgZ(15,"button",6),t.NdJ("click",function(){return r.hide=!r.hide}),t.TgZ(16,"mat-icon"),t._uU(17),t.qZA()(),t.YNc(18,M,2,0,"mat-error")(19,k,2,2,"mat-error")(20,q,2,0,"mat-error")(21,N,2,0,"mat-error"),t.qZA(),t.TgZ(22,"button",7),t._uU(23," Register "),t.qZA(),t.TgZ(24,"h4",8),t._uU(25," Not yet registered? \u2043\xa0 "),t.TgZ(26,"a",9),t._uU(27,"Login"),t.qZA()()()()),2&e){let i,d,l,A,F;t.xp6(1),t.Q6J("formGroup",r.authForm),t.xp6(7),t.um2(8,null!=(i=r.authForm.get("email"))&&i.valid||null!=(i=r.authForm.get("email"))&&i.hasError("required")||null!=(i=r.authForm.get("email"))&&i.hasError("isEmailExist")?-1:8),t.xp6(1),t.um2(9,r.authForm.get("email").hasError("required")?9:-1),t.xp6(1),t.um2(10,null!=(d=r.authForm.get("email"))&&d.hasError("isEmailExist")?10:-1),t.xp6(4),t.Q6J("type",r.hide?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",r.hide),t.xp6(2),t.Oqu(r.hide?"visibility_off":"visibility"),t.xp6(1),t.um2(18,r.authForm.get("password").hasError("required")?18:-1),t.xp6(1),t.um2(19,null==(l=r.authForm.get("password"))||!l.hasError("minlength")||null!=(l=r.authForm.get("password"))&&l.valid||null==(l=r.authForm.get("password"))||!l.touched?-1:19),t.xp6(1),t.um2(20,null!=(A=r.authForm.get("password"))&&A.hasError("invalidPassword")?20:-1),t.xp6(1),t.um2(21,null!=(F=r.authForm.get("password"))&&F.hasError("isPasswordExist")?21:-1),t.xp6(1),t.Q6J("disabled",r.isDisabled?!r.authForm.valid:r.authForm.valid)}},dependencies:[m.lN,m.KE,m.hX,m.TO,m.R9,g.Ps,g.Hw,R.g0,p.ot,p.lW,p.RK,v.c,v.Nt,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,h.rH],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:18px;width:100%;max-width:380px;margin:0 auto;padding:10px;box-shadow:0 0 16px var(--shadow);background:var(--background-form);border-radius:10px}.form-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;height:calc(100vh - 84px);border-radius:10px}.form-title[_ngcontent-%COMP%]{display:flex;align-items:flex-start;width:100%;font-size:22px}.form-input[_ngcontent-%COMP%]{width:100%}.form-btn[_ngcontent-%COMP%]{margin-top:10px;width:120px;font-size:18px;font-weight:500}.form-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;font-size:14px}.form-link--click[_ngcontent-%COMP%]{color:var(--link);transition:color .2s ease-out}.form-link--click[_ngcontent-%COMP%]:hover{color:var(--link-hover)}"]})}return o})();const J=[{path:"",component:Z}];let Y=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#o=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(J),h.Bz]})}return o})(),D=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#o=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[y.ez,Z,Y]})}return o})()}}]);